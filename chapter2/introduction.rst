対話的開発環境 Jupyter-notebook
===============================================

本節では、対話的プログラミング環境の1つである Jupyter-notebook を紹介します。
Jupyter-notebook は

+ 実行結果を可視化しながらデータ解析を進めることができる
+ ソースコード、実行結果、グラフ、数式、文書を１つのファイルに保存することができる

などが特徴で、近年利用が大きく広まっています。

.. 歴史

元々 Jupyter-notebook は IPython というPythonの対話的プログラム環境の一部の
IPython-notebookとして開発が進められてきましたが、その有用性が認められ、
現在はPythonに限らずJulia, R, ruby など他のインタープリタ言語でも利用可能な
汎用ソフトウェアとして開発が続けられています。

上記の特徴は、試行錯誤しながらすすめる研究活動を行うのに効果的なだけでなく、
研究成果をデータ・解析コード・結果をまとめて公開するのにも有用です。
例えば、2016年に重力波が初めて発見された時の計測データ・解析プログラムは
https://losc.ligo.org/s/events/GW150914/GW150914_tutorial.html
に Jupyter-notebook 形式で公開されており、
誰でもその結果を追試することができるようになっています。
さらにソースコードの実行結果をすぐに可視化できることは、
プログラムスキルを身に付けるためにも非常に効果的です。


----------------------------------------
Jupyter-notebookのインストール
----------------------------------------

本講座で紹介したPython環境の１つであるAnacondaには、
すでにJupyter-notebookが含まれています。
インストールされていない別の環境などではターミナルから

.. code-block:: bash

  conda install jupyter-notebook

もしくは

.. code-block:: bash

  pip install jupyter-notebook

を実行することでインストールできます。

----------------------------------------
Jupyter-notebookの起動と終了
----------------------------------------

Windowsでの起動
----------------------------------------

WindowsからJupyter-notebookを起動するための手順は、以下の通りです。

 1. コマンドプロンプトを立ち上げる (必要に応じてディレクトリに移動する)
 2. 起動コマンド jupyter-notebook を入力する

これにより、自動的にブラウザが立ち上がり、Jupyter-notebookのホーム画面が表示されます。


Mac、Linuxでの起動
----------------------------------------

Mac, Linuxの場合も同様に

 1. ターミナルを立ち上げる (必要に応じて適宜ディレクトリを移動する)
 2. 起動コマンド jupyter-notebook を入力する

上記操作を行うことで、:numref:`try_jupyter` と同様の画面がブラウザに表示されます。
なお、ブラウザを誤って閉じてしまった場合も、 http://localhost:8888
にアクセスすることで、Jupyer-notebookのホーム画面を再度表示できます。


ノートブックファイルの新規作成
----------------------------------------

Jupyter-notebook のホーム画面では、ディレクトリがツリー表示されています。
フォルダ間の移動、ファイル・フォルダの名前の新規作成・名前の変更・削除など、
シンプルなファイル操作はJupyter-notebook 内で一通りできるようになっています。
ディレクトリを適宜移動し、ノートブックファイルを新たに作成して学習を始めましょう。

前節で体験したように、
右上の New から Python 3 を選択すると、
新しいノートブックファイルが作成され新しいウィンドウとして開かれます。
作成されるファイル名はデフォルトでは Untitled となっており、ページの最上部に表示されています。
この部分をクリックするとファイル名を変更するダイアログが表示されますので、
適宜わかりやすい名前に変更してください。

Jupyter-notebook の終了
----------------------------------------

Jupyter-notebook には、
個別のノートブックファイル（カーネル）の終了とJupyter-notebook 自体の終了の2つのレベルの終了があります。
カーネルとはPythonの実行を行っているコアの部分のことであり、
オブジェクトの内容をメモリ格納していたり、何か計算をしていたりする機能のことです。
ブラウザ画面を閉じるだけではカーネルは終了されません。つまり、データはメモリ内に残されたままになっています。
ツールバーの File > Close and halt を実行することでカーネルを終了してください。
もしくは、 Jupyter-notebook ホーム画面の Running タブには、
カーネルが実行中であるノートブックファイル一覧が表示されるています。
そこで該当するノートブックファイルの shutdown ボタンを押すことでも、カーネルを停止することができます。

Jupyter-notebook 自体を終了するには、起動したコマンドプロンプトもしくはターミナルにて
Ctrl+C を入力してください。
